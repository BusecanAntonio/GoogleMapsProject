<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Romania Map with Search</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet-routing-machine/3.2.12/leaflet-routing-machine.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />
    <link rel="stylesheet" href="/css/style.css" />
</head>
<body>

<!-- Butoane Stanga -->
<button id="addLocationBtn" class="action-btn" title="Deschide Creator">+</button>
<button id="toggleRoutingBtn" class="action-btn" title="Activeaza/Dezactiveaza Rutarea">ğŸ›£ï¸</button>

<!-- Bara Cautare -->
<input type="text" id="searchBox" placeholder="Cauta locatie...">

<!-- SELECTOR VITEZA GLOBAL -->
<div id="globalSpeedSelector">
    <div class="speed-option active-legal" id="globalSpeedLegal">ğŸ˜‡ Legal</div>
    <div class="speed-option" id="globalSpeedIllegal">ğŸ˜ˆ +30 km/h</div>
</div>

<!-- PANOU CREATOR -->
<div id="creatorPanel">
    <h3>Creator</h3>

    <div class="creator-tabs">
        <div class="creator-tab active" data-tab="location">ğŸ“ Punct</div>
        <div class="creator-tab" data-tab="road">ğŸ›£ï¸ Drum</div>
    </div>

    <!-- TAB 1: LOCATIE -->
    <div id="tab-location" class="tab-content active">
        <div class="zone-helper">
            <input type="text" id="locZoneInput" placeholder="Mergi la zona (ex: Brasov)...">
            <button id="locGoToZoneBtn">Go</button>
        </div>

        <label style="font-size:14px; font-weight:bold;">Tip Locatie:</label>
        <select id="locTypeSelect" class="type-select">
            <option value="default">ğŸ“ Standard</option>
            <option value="cafe">â˜• Cafenea</option>
            <option value="shop">ğŸ›’ Magazin</option>
            <option value="police">ğŸš“ Politie</option>
            <option value="blocked">â›” Drum Blocat</option>
            <option value="gas">â›½ Benzinarie</option>
        </select>

        <input type="text" id="newLocName" class="builder-input" placeholder="Nume Locatie...">

        <div class="coord-row">
            <input type="text" id="latInput" placeholder="Latitudine">
            <input type="text" id="lngInput" placeholder="Longitudine">
        </div>

        <button id="pickOnMapBtn" class="panel-btn">Alege pe Harta (Click)</button>
        <p id="locStatus" style="font-size:12px; color:#666; margin:5px 0; display:none;">Click pe harta pentru a prelua coordonatele...</p>

        <button id="saveLocationBtn" class="panel-btn">Salveaza Locatia</button>
    </div>

    <!-- TAB 2: DRUM -->
    <div id="tab-road" class="tab-content">
        <div class="zone-helper">
            <input type="text" id="roadZoneInput" placeholder="Mergi la zona...">
            <button id="roadGoToZoneBtn">Go</button>
        </div>

        <label style="font-size:14px; font-weight:bold;">Tip Drum:</label>
        <select id="roadTypeSelect" class="type-select">
            <option value="default">ğŸ›£ï¸ Standard</option>
            <option value="blocked">â›” Blocat</option>
            <option value="work">ğŸš§ In Lucru</option>
            <option value="accident">ğŸ’¥ Accident</option>
        </select>

        <div id="stopsContainer">
            <!-- Input-uri generate dinamic -->
        </div>
        <button id="addStopBtn" class="panel-btn">+ Adauga Punct</button>

        <hr style="margin:10px 0; border:0; border-top:1px solid #ddd;">

        <input type="text" id="roadNameInput" class="builder-input" placeholder="Nume Drum...">
        <button id="saveBuiltRoadBtn" class="panel-btn">Calculeaza si Salveaza</button>
        <p id="roadStatus" style="font-size:12px; color:#666; margin:5px 0; display:none;">Alege punctul pe harta...</p>
    </div>
</div>

<!-- PANOU DETALII -->
<div id="detailsPanel">
    <div class="details-header">
        <h2 id="detailTitle">Nume Drum</h2>
        <button class="close-btn" id="closeDetailsBtn">&times;</button>
    </div>

    <div class="details-content">
        <div class="detail-row">
            <div class="detail-icon">â„¹ï¸</div>
            <div class="detail-text" id="detailType">Tip: Standard</div>
        </div>

        <!-- SELECTOR VITEZA (DOAR AICI) -->
        <div class="speed-selector">
            <div class="speed-option active-legal" id="speedLegal">ğŸ˜‡ Legal</div>
            <div class="speed-option" id="speedIllegal">ğŸ˜ˆ +30 km/h</div>
        </div>

        <div class="detail-row">
            <div class="detail-icon">ğŸ“</div>
            <div class="detail-text" id="detailDistance">Calculare...</div>
        </div>
        <div class="detail-row">
            <div class="detail-icon">â±ï¸</div>
            <div class="detail-text" id="detailDuration">Calculare...</div>
        </div>
        <div class="detail-row">
            <div class="detail-icon">ğŸ“</div>
            <div class="detail-text" id="detailStart">Start: ...</div>
        </div>
        <div class="detail-row">
            <div class="detail-icon">ğŸ</div>
            <div class="detail-text" id="detailEnd">Sfarsit: ...</div>
        </div>
    </div>

    <div class="details-actions">
        <button class="action-item" id="navigateBtn">ğŸš— Navigheaza</button>
        <button class="action-item danger" id="reportBtn">âš ï¸ Raporteaza</button>
    </div>
</div>

<!-- MODAL RAPORTARE -->
<div id="reportModal" class="glass-modal" style="display:none;">
    <h3 id="reportTitle" style="color:#dc3545;">âš ï¸ Raporteaza</h3>
    <p id="reportItemName" style="font-weight:bold; margin-bottom:15px; color:#333;"></p>

    <label style="display:block; text-align:left; margin-bottom:5px; font-size:14px;">Motivul raportarii:</label>
    <select id="reportReason" class="type-select" style="margin-bottom:20px;">
    </select>

    <div class="form-buttons">
        <button id="confirmReportBtn" class="form-btn" style="background-color:#dc3545; color:white;">Sterge</button>
        <button id="cancelReportBtn" class="form-btn" style="background-color:#6c757d; color:white;">Anuleaza</button>
    </div>
</div>

<!-- NOTIFICARE REROUTING -->
<div id="rerouteNotification" style="display:none; position:fixed; bottom:20px; left:50%; transform:translateX(-50%); background:#dc3545; color:white; padding:15px; border-radius:30px; box-shadow:0 5px 15px rgba(0,0,0,0.3); z-index:4000; font-weight:bold; align-items:center; gap:10px;">
    <span>âš ï¸ Ruta initiala blocata! Redirectionare...</span>
</div>

<!-- Login -->
<button id="loginBtn">ğŸ‘¤</button>
<div id="loginModal" class="modal">
    <div class="modal-content">
        <h3>Login / Sign up</h3>
        <input type="text" id="username" placeholder="Username"><br>
        <input type="password" id="password" placeholder="Password"><br>
        <button id="loginAction" class="modal-btn">Login</button>
        <button id="signupAction" class="modal-btn">Sign up</button>
    </div>
</div>

<div id="map"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-routing-machine/3.2.12/leaflet-routing-machine.js"></script>
<script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
<script src="/js/script.js"></script>

</body>
</html>
